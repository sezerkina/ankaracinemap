<!DOCTYPE html>

<html lang="tr">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Ankara’nın Sinematik Kartografyası</title>
<link href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" rel="stylesheet"/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet.heat/dist/leaflet-heat.js"></script>
<!-- --- Robust removal of Leaflet credits & scale, and dynamic 1: scale display --- -->
<script>
  // This script references `map` variable later; it will attach handlers once map exists.
  (function(){
    function ensureHidden() {
      document.querySelectorAll('.leaflet-control-attribution, .leaflet-control-scale').forEach(el => { try{ el.remove(); }catch(e){} });
      const s = document.createElement('style');
      s.id = 'force-hide-leaflet-credits';
      s.innerHTML = '.leaflet-control-attribution, .leaflet-control-scale{display:none !important; visibility:hidden !important; height:0 !important; margin:0 !important; padding:0 !important;}';
      if(!document.getElementById('force-hide-leaflet-credits')) document.head.appendChild(s);
    }
    ensureHidden();
    // removed old auto-center block
} else {
      document.getElementById('tab-duygu').classList.add('active-visible');

      // Duygu: clear layers and hide film UI
      document.getElementById('search').style.display = 'none';
      document.getElementById('film-list').style.display = 'none';
      clearData();
    }
  });
});

// Initial load: populate film tab exactly like original
loadKmzs();
// ensure default tab visually active
document.getElementById('tab-filmler').classList.add('active-visible');
document.getElementById('tab-filmler').classList.add('active-visible');
document.querySelector('.tab-btn[data-tab="filmler"]').classList.add('active');

</script>

<script>
function carouselNext(btn){
    const popup = btn.closest('.leaflet-popup-content');
    if (!popup) return;
    const imgs = popup.querySelectorAll('.carousel-image');
    let i = [...imgs].findIndex(im => im.classList.contains('active'));
    imgs[i].classList.remove('active');
    imgs[(i + 1) % imgs.length].classList.add('active');
}
function carouselPrev(btn){
    const popup = btn.closest('.leaflet-popup-content');
    if (!popup) return;
    const imgs = popup.querySelectorAll('.carousel-image');
    let i = [...imgs].findIndex(im => im.classList.contains('active'));
    imgs[i].classList.remove('active');
    imgs[(i - 1 + imgs.length) % imgs.length].classList.add('active');
}
</script>

</body>
</html>
